<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 위에서 작성한 Mapper 인터페이스의 전체 경로를 namespace로 지정합니다. -->
<mapper namespace="org.cardGGaduekMainService.coupon.couponProduct.mapper.CouponProductMapper">

    <!--
        새로운 쿠폰 상품을 등록하는 쿼리입니다.
        useGeneratedKeys="true"와 keyProperty="id"는 DB에 auto_increment로 설정된 PK 값을
        파라미터로 전달된 CouponProductVO 객체의 id 필드에 다시 담아주는 설정입니다.
    -->
    <insert id="insertCouponProduct" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO coupon_product (issued_at, expired_at, coupon_name, coupon_quantity, description)
        VALUES (#{issued_at}, #{expired_at}, #{coupon_name}, #{coupon_quantity}, #{description})
    </insert>

    <!--
        ID로 특정 쿠폰 상품을 조회하는 쿼리입니다.
        resultType에는 조회 결과를 담을 VO 객체의 전체 경로를 지정합니다.
    -->
    <select id="selectCouponProductById" resultType="org.cardGGaduekMainService.coupon.couponProduct.domain.CouponProductVO">
        SELECT
            id,
            issued_at,
            expired_at,
            coupon_name,
            coupon_quantity,
            description
        FROM
            coupon_product
        WHERE
            id = #{id}
    </select>

    <!-- 모든 쿠폰 상품 목록을 조회하는 쿼리입니다. -->
    <select id="selectAllCouponProducts" resultType="org.cardGGaduekMainService.coupon.couponProduct.domain.CouponProductVO">
        SELECT
            id,
            issued_at,
            expired_at,
            coupon_name,
            coupon_quantity,
            description
        FROM
            coupon_product
        ORDER BY
            id DESC
    </select>

</mapper>